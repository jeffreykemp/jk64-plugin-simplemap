var simplemap={geocode:function(e,o){apex.debug("simplemap.geocode"),o.geocode({address:$v(e.geocodeItem),componentRestrictions:""!==e.country?{country:e.country}:{}},function(o,a){if(a==google.maps.GeocoderStatus.OK){apex.debug(e.regionId+" geocode ok");var t=o[0].geometry.location;simplemap.setMarker(e,t.lat(),t.lng()),""!==e.syncItem&&$s(e.syncItem,t.lat()+","+t.lng())}else apex.debug(e.regionId+" geocode was unsuccessful for the following reason: "+a)})},setMarker:function(e,o,a){if(apex.debug("simplemap.setMarker"),null!==o&&null!==a){var t=e.marker?e.marker.getPosition():new google.maps.LatLng(0,0);if(o==t.lat()&&a==t.lng())apex.debug(e.regionId+" marker not changed");else{apex.debug(e.regionId+" move marker");var n=new google.maps.LatLng(o,a);e.map.panTo(n),e.markerZoom&&e.map.setZoom(e.markerZoom),e.marker?(e.marker.setMap(e.map),e.marker.setPosition(n)):e.marker=new google.maps.Marker({map:e.map,position:n,icon:e.icon})}}else e.marker&&(apex.debug(e.regionId+" remove marker"),e.marker.setMap(null))},getAddress:function(e,o,a){apex.debug("simplemap.getAddress");var t={lat:o,lng:a};e.geocoder.geocode({location:t},function(o,a){if(a===google.maps.GeocoderStatus.OK){for(i=0;i<o.length;i++)apex.debug(e.regionId+" result["+i+"]="+o[i].formatted_address+" ("+o[i].types.join()+")");if(o[0]){$s(e.addressItem,o[0].formatted_address);var t=o[0].address_components;for(i=0;i<t.length;i++)apex.debug(e.regionId+" result[0] "+t[i].types+"="+t[i].short_name+" ("+t[i].long_name+")");apex.jQuery("#"+e.regionId).trigger("address",{map:e.map,result:o[0]})}else window.alert("Insufficient results found")}else a===google.maps.GeocoderStatus.ZERO_RESULTS?window.alert("No results found"):window.alert("Geocoder failed due to: "+a)})},init:function(e){apex.debug("simplemap.init");var o={zoom:e.initZoom,center:new google.maps.LatLng(e.initLat,e.initLng),mapTypeId:google.maps.MapTypeId.ROADMAP};if(e.map=new google.maps.Map(document.getElementById(e.container),o),e.mapstyle&&e.map.setOptions({styles:e.mapstyle}),e.readonly?e.map.setOptions({disableDefaultUI:!0,draggable:e.pan,zoomControl:e.zoom,scrollwheel:e.zoom,disableDoubleClickZoom:!e.zoom,gestureHandling:e.gestureHandling}):e.map.setOptions({draggable:e.pan,zoomControl:e.zoom,scrollwheel:e.zoom,disableDoubleClickZoom:!e.zoom,gestureHandling:e.gestureHandling}),""!==e.syncItem){var a=$v(e.syncItem);if(null!==a&&a.indexOf(",")>-1){var t=a.split(",");simplemap.setMarker(e,t[0],t[1])}$("#"+e.syncItem).change(function(){var o=this.value;if(null!==o&&void 0!==o&&o.indexOf(",")>-1){var a=o.split(",");simplemap.setMarker(e,a[0],a[1])}})}if(""!==e.addressItem&&(e.geocoder=new google.maps.Geocoder),e.readonly||google.maps.event.addListener(e.map,"click",function(o){var a=o.latLng.lat(),t=o.latLng.lng();simplemap.setMarker(e,a,t),""!==e.syncItem&&$s(e.syncItem,a+","+t),""!==e.addressItem&&simplemap.getAddress(e,a,t),apex.jQuery("#"+e.regionId).trigger("mapclick",{map:e.map,lat:a,lng:t})}),""!=e.geocodeItem){var n=new google.maps.Geocoder;$("#"+e.geocodeItem).change(function(){simplemap.geocode(e,n)})}e.geolocate&&(navigator.geolocation?(apex.debug(e.regionId+" geolocate"),navigator.geolocation.getCurrentPosition(function(o){var a={lat:o.coords.latitude,lng:o.coords.longitude};e.map.panTo(a),e.geolocateZoom&&e.map.setZoom(e.geolocateZoom),""!==e.syncItem&&$s(e.syncItem,a.lat+","+a.lng),""!==e.addressItem&&simplemap.getAddress(e,a.lat,a.lng),apex.jQuery("#"+e.regionId).trigger("geolocate",{map:e.map,lat:a.lat,lng:a.lng})})):apex.debug(e.regionId+" browser does not support geolocation")),apex.jQuery("#"+e.regionId).trigger("maploaded",{map:e.map})}};